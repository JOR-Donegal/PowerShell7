# DSC Example
I create dsc1.ps1 on my domain controller, dc-1.
```
Configuration DscConfiguration
{
    param
    (
        [string[]]$ComputerName='localhost'
    )

    Import-DscResource -ModuleName PsDesiredStateConfiguration

    Node $ComputerName
    {
        WindowsFeature MyFeatureInstance
        {
            Ensure = 'Present'
            Name = 'RSAT'
        }

        WindowsFeature My2ndFeatureInstance
        {
            Ensure = 'Present'
            Name = 'DNS'
        }
        File HelloWorld {
            SourcePath = "C:\Users\Administrator\Documents\jor.txt"
            DestinationPath = "C:\Temp\HelloWorld.txt"
            Ensure = "Present"
            Contents   = "Hello World from DSC!"
        }
    }
}
DscConfiguration

```
## Anatomy
The outer block is the configuration block, with the name __DscConfiguration__. We could add the node to run this against using
```
Node @('localhost', 'server-1')
```
In my script, I added a parameter so that the computers this will act against can be entered at the command line. Below I just use the ComputerName parameter “localhost”.
<figure>
<img src = "https://jor-donegal.github.io/PowerShell7/images/fig19.jpg">
<figcaption>Fig 19. Output of script.</figcaption>
</figure>

## MOF File
When I ran this, it resolved all variables and compiled a human readable MOF file. A folder gets created called whatever the script name is (DscConfiguration). A MOF file gets created for each node and is saved in the script name directory. This is for the MOF files and any other supporting files which are created. I only have a single example for localhost.
```
/*
@TargetNode='localhost'
@GeneratedBy=administrator
@GenerationDate=12/01/2022 16:16:45
@GenerationHost=DC-1
*/

instance of MSFT_RoleResource as $MSFT_RoleResource1ref
{
ResourceID = "[WindowsFeature]MyFeatureInstance";
 Ensure = "Present";
 SourceInfo = "C:\\PowerShell\\wt4\\dsc1.ps1::10::9::WindowsFeature";
 Name = "RSAT";
 ModuleName = "PsDesiredStateConfiguration";

ModuleVersion = "1.0";

 ConfigurationName = "DscConfiguration";

};
instance of MSFT_RoleResource as $MSFT_RoleResource2ref
{
ResourceID = "[WindowsFeature]My2ndFeatureInstance";
 Ensure = "Present";
 SourceInfo = "C:\\PowerShell\\wt4\\dsc1.ps1::16::9::WindowsFeature";
 Name = "DNS";
 ModuleName = "PsDesiredStateConfiguration";

ModuleVersion = "1.0";

 ConfigurationName = "DscConfiguration";

};
instance of OMI_ConfigurationDocument

                    {
 Version="2.0.0";
 

                        MinimumCompatibleVersion = "1.0.0";
                        CompatibleVersionAdditionalProperties= {"Omi_BaseResource:ConfigurationName"};
                        Author="administrator";
                        GenerationDate="12/01/2022 16:16:45";
                        GenerationHost="DC-1";
                        Name="DscConfiguration";
                    };

```
